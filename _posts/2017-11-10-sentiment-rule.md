---
layout:   post
title:    (情感分析系统1) 基于词典的情感分析
date:     2017-11-10T19:40:00Z
---

重要的事情说3遍：情感分析非常难! 情感分析非常难! 情感分析很难!

本文是情感分析系统博客的第一篇，想讲一下如何实现一个基于词典的情感分析，
它的优点、痛点、价值。通过基于词典的情感分析，我们可以认识到：
    情感分析确实很难。):

## 情感分析的应用场景
百分点技术公司有一个非常核心的业务线，舆情业务线，产品名叫MediaForce。
它面向企业用户、政府用户，爬取它们关心的公网数据，分析数据反馈给用户。
其中非常重要的一个属性是：这条数据对客户是否敏感？一种简单的敏感可以定义为负面。
情感分析输入一个文本，一个公司，返回正面/中性/负面。
细粒度(情感)分析，做各种信息提取(主体与关系)、细粒度行业敏感类型分类、口碑统计等。
但是情感分析本身，就已经难爆了...

从我今天的预警邮件随便选几条判断错误的数据：
* 海底捞危机公关案例，学习http://t.cn/RCR9cn...
* 海底捞居然一下子胖了两斤，崩溃[允悲][允悲][允悲]现在5...
* 携程的危机公关和海底捞差了100个薛之谦
* 我的环下午要去吃海底捞了，而我，要上课，哭了

这些并不是对海底捞负面的.

以及这些:
* 长沙珂信肿瘤医院_地址_电话_有问必答网医院频道
* 贾继东教授:肝硬化患者也需要抗病毒治疗!
* 一个人吃海底捞，对面真的给放了只熊啊哈哈哈哈哈太逗了～十级孤独？不存在的！
* 讲真我是奔着服务员去的[偷乐]#海底捞服务员##海底捞服务员有毒#
* 天河“洗河”行动两月捞出50吨垃圾 还有活体鳄鱼
* iPhone X到手体验,腾讯手机管家一键过滤垃圾短信

这些完全不是负面。

这仅仅是一小小部分。。。还有其他各种各样类型的挑战。后面等我另起文章文章讨论下。
以上是我用情感词典的模型出的结果；但我敢保证，目前深度学习学的结果也不会好，
如果数据有限，泛化的问题会很严重导致结果更糟糕！

本文介绍是如何构建一个商业级(效果这么差)的情感分析程序的，然后探讨问题以及可能解决的途径（重点）。

## 基于词典与规则的情感分析
以下介绍构建的过程与一些难点。

### 基于词典的情感分析基本流程
基于词典的情感分析的基本流程是情感词匹配，然后利用规则对一些情感进行加权，最后得到一个得分。

一些实现的细节：
* 需要匹配词组
* 多模匹配能加快匹配速度，分词过滤能保证匹配基本正确
* 如何同时多个词典模型进行匹配：有时候我们需要根据不同的词典对同一句话得出不同分数

情感词的分数怎么来呢？
我这是我一个人人工过的。需要注意的是，保守点，一个词统计上负面并不代表他是负面，有可能他经常与
负面的词搭配，但他有事也和中性的词搭配。机器学习的方法是每个统计出合适的倾向，所有的数据的总的倾向
总和尽量好。有个问题，并没有符合全网的数据的监督数据。如果有某个符合真实分布的数据，我相信机器学习。
我这里人工过的话就是拍脑子。。
代码见[]

### 情感词典扩展
我使用的方法是基于词向量扩展，基本上还是挺准的，过出来之后再人工过。
代码见[]

### 规则
词典与规则是构成这个方法的2个部分，但实际上靠人都很难把他们设计好。
比如说 "过滤垃圾"，垃圾在这里是负面的，过滤是否能算正面的呢，人一看似乎也不是正面的。
但是过滤垃圾可以是正面的，因为过滤的语义以及它后面的负面词。在统计学习中，我们可以让过滤或者过滤垃圾这样的pattern
为正面。规则很难处理这样的形式，词典则很难穷尽这样的词组。

再举个例子，否定词规则。否定词规则需要识别这是个否定=触发器，否定的作用域等问题。
考虑以下几个句子:
* 不麻利不牛逼
* 不觉得他很蠢
* 不傻、牛逼！
* 颜值爆表
* 雾霾爆表
* 克服困难/突破阻碍

靠人去设计规则很难描述清楚作用域；很难描述清楚/以及穷尽触发器。
这个理论上是可以靠机器学习来解决的。

### 多语的情感词典、规则
可以使用conceptnet、wikidat等同义词典去生成。
多语的规则目前不知道怎么搞。

## 目前的效果、问题
效果我自己看也就一般吧，问题挺多的。
模型的方法再议，基于词典的方法是否有改进空间。

